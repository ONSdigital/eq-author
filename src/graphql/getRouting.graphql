#import "./fragments/answer.graphql"
#import "./fragments/option.graphql"
#import "./fragments/routing-ruleset.graphql"
#import "./fragments/routing-destination.graphql"

query GetRouting($questionnaireId: ID!, $pageId: ID!) {
  questionnaire(id: $questionnaireId) {
    id
    sections {
      id
      plaintextTitle: title(format: Plaintext)
      pages {
        id
        title
        ... on QuestionPage {
          plaintextTitle: title(format: Plaintext)
          answers {
            ...Answer
            ... on MultipleChoiceAnswer {
              options {
                ...Option
              }
              other {
                option {
                  ...Option
                }
                answer {
                  ...Answer
                }
              }
            }
          }
          routingRuleSet {
            ...RoutingRuleSet
          }
        }
      }
    }
  }
  availableRoutingDestinations(pageId: $pageId) {
    logicalDestinations {
      ...LogicalDestination
    }
    questionPages {
      ...QuestionPageDestination
    }
    sections {
      ...SectionDestination
    }
  }
}
